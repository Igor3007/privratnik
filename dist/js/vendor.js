class afLightbox{constructor(e){this.modal="",e&&(this.mobileBottom=e.mobileInBottom||!1)}init(){}createTemplate(){var e=document.createElement("div");return e.innerHTML=`
                <div class="af-popup">
                    <div class="af-popup__bg"></div>
                    <div class="af-popup__wrp">
                        <div class="af-popup__container">
                            <div class="af-popup__close">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg>
                            </div>
                            <div class="af-popup__content"></div>
                        </div>
                    </div>
                </div>
                `,document.body.append(e),this.instanse=e}open(e,t){let i=this;this.modal=this.createTemplate(),window.innerWidth<=480&&this.mobileBottom&&this.modal.querySelector(".af-popup").classList.add("af-popup--mobile"),document.body.classList.add("page-hidden"),this.modal.querySelector(".af-popup__content").innerHTML=e,this.modal.querySelector(".af-popup__close").addEventListener("click",function(){i.close()}),this.modal.querySelector('[data-af-popup="close"]')&&this.modal.querySelector('[data-af-popup="close"]').addEventListener("click",function(e){i.close()}),t&&t(this.modal),setTimeout(()=>{this.modal.querySelector(".af-popup").classList.add("af-popup--visible")},10),this.createEvent()}changeContent(e){this.modal.querySelector(".af-popup__content").innerHTML=e}createEvent(){let t=this;this.instanse.querySelector(".af-popup").addEventListener("click",function(e){e.target.closest(".af-popup__container")||t.close()})}close(){document.body.classList.contains("page-hidden")&&document.body.classList.remove("page-hidden"),this.instanse.querySelector(".af-popup").classList.remove("af-popup--visible"),setTimeout(()=>{this.instanse.remove()},300)}}class afSelect{constructor(e){this.selector=e.selector,this.selectAll=document.querySelectorAll(this.selector),this.on=e.on||!1}init(){this.renderTemplate(),this.clickEventOut()}reinit(e){e=e.parentNode;e.querySelector(".select-styled")&&(e.querySelector(".select-styled").remove(),e.querySelector(".select-list").remove()),this.renderOption(e),this.clickEventOpenSelect(e)}ajaxOption(e,t){let i=new XMLHttpRequest;return i.open("GET",e.dataset.ajax),i.responseType="json",i.setRequestHeader("Content-type","application/json; charset=utf-8"),i.send(),i.onerror=function(){console.err("Error: afSelect ajax request failed")},i.onreadystatechange=function(){3==i.readyState&&e.closest(".af-select").querySelector(".select-list").classList.add("select-list--load"),4==i.readyState&&e.closest(".af-select").querySelector(".select-list").classList.remove("select-list--load")},i.onload=function(){t(i.response)},null}renderOption(s){var n=this,a=s.querySelector("select"),r=a.getAttribute("placeholder"),o=a.getAttribute("multiple");const l=document.createElement("div"),d=(l.classList.add("select-styled"),l.innerHTML="<span>"+r+"</span>",document.createElement("ul"));d.classList.add("select-options");var e,t=document.createElement("div");function c(e){e.querySelectorAll("select > option").forEach(function(e,t){var i,s=document.createElement("li");function a(e){if(o){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(", "):r}return e.innerText}s.innerHTML=e.innerText,s.setAttribute("rel",e.value),o&&((i=document.createElement("span")).classList.add("af-check-multiple"),s.append(i)),0!=t||r||(l.innerHTML="<span>"+e.innerText+"</span>"),e.getAttribute("selected")&&(l.innerHTML=r?'<span class="af-selected-placeholder" data-af-placeholder="'+r+'">'+a(e)+"</span>":"<span>"+a(e)+"</span>",s.classList.add("active")),e.getAttribute("disabled")||(d.appendChild(s),n.clickEventListItem(s,e,t))})}t.classList.add("select-list"),"false"!=a.getAttribute("data-find")&&5<a.querySelectorAll("option").length&&((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("placeholder","Найти"),t.appendChild(e),e.addEventListener("keyup",e=>{this.findOption(e)})),t.appendChild(d),s.querySelector(".select-styled")||s.appendChild(l),s.querySelector(".select-options")||s.appendChild(t),a.dataset.ajax&&this.ajaxOption(a,function(e){a.innerHTML="";let i=a.dataset.selected;var t=a.getAttribute("placeholder");e.unshift({text:t||"-Выберите-",value:""}),e.forEach(function(e){var t=document.createElement("option");t.value=e.value,t.innerText=e.text,i==e.value&&(t.setAttribute("selected",!0),a.removeAttribute("data-selected")),a.append(t)}),c(s)}),a.dataset.ajax||c(s),a.afSelect=new Object,a.afSelect.open=function(){n.openSelect(s)},a.afSelect.close=function(){n.closeSelect()},a.afSelect.update=function(){n.reinit(a)}}findOption(e){var t=e.target.closest(".select-list").querySelectorAll("li");const i=e.target.value;t.forEach(e=>{-1!==e.innerText.toLowerCase().indexOf(i.toLowerCase())?e.style.display="block":e.style.display="none"})}renderTemplate(){const i=this,s=[];this.selectAll.forEach(function(e,t){var i;e.classList.contains("select-hidden")||(e.classList.add("select-hidden"),(i=document.createElement("div")).classList.add("af-select"),e.getAttribute("multiple")&&i.classList.add("af-select--multiple"),i.innerHTML=e.outerHTML,e.parentNode.replaceChild(i,e),s.push(i))}),s.forEach(function(e,t){i.renderOption(e),i.clickEventOpenSelect(e)})}openSelect(e){if(e.querySelector(".select-styled.active"))return this.closeSelect(),!1;e.querySelector("select").dataset.ajax&&!e.querySelector(".select-styled").classList.contains("active")&&(e.querySelector(".select-list").remove(),this.renderOption(e)),window.innerHeight-e.getBoundingClientRect().bottom<250?e.classList.add("af-select--top"):e.classList.contains("af-select--top")&&e.classList.remove("af-select--top"),e.style.maxWidth=e.offsetWidth+"px",e.querySelector(".select-styled").classList.add("active"),e.querySelector(".select-options").classList.add("active"),e.querySelector(".select-list").classList.add("active"),document.querySelector("body").classList.add("af-select-open")}closeSelect(){if(!document.querySelector(".select-styled.active"))return!1;document.querySelector(".select-styled.active").classList.remove("active"),document.querySelector(".select-options.active").classList.remove("active"),document.querySelector(".select-list.active").classList.remove("active"),document.querySelector("body").classList.remove("af-select-open")}clickEventOut(){const t=this;document.addEventListener("click",function(e){t.closeSelect()})}clickEventListItem(e,s,t){const a=s.parentNode.parentNode,n=this,r=a.querySelector("select").getAttribute("placeholder"),o=a.querySelector("select").getAttribute("multiple"),l=a.querySelector(".select-styled");e.addEventListener("click",function(e){function t(e){if(o){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(", "):r}return e.innerText}e.stopPropagation(),e.preventDefault(),s.closest(".af-select").classList.add("af-select--selected"),a.querySelector(".select-options li.active")&&!o&&a.querySelector(".select-options li.active").classList.remove("active"),this.classList.contains("active")?(this.classList.remove("active"),s.removeAttribute("selected")):(this.classList.add("active"),s.setAttribute("selected","selected")),r?l.innerHTML='<span class="af-selected-placeholder" data-af-placeholder="'+r+'">'+t(s)+"</span>":a.querySelector(".select-styled span").innerHTML=t(s),o||(a.querySelector("select").value=this.getAttribute("rel"));var i=new Event("change");a.querySelector("select").dispatchEvent(i),e.target.classList.contains("af-check-multiple")||n.closeSelect(),n.on.change&&n.on.change(s)})}clickEventOpenSelect(e){const t=this;function i(e){e.stopPropagation(),e.preventDefault(),e.target.closest(".select-styled")&&t.openSelect(this)}e.removeEventListener("click",i),e.addEventListener("click",i)}}!function(){"use strict";function o(e){return e[e.length-1]}function D(t,...e){return e.forEach(e=>{t.includes(e)||t.push(e)}),t}function _(e,t){return e?e.split(t):[]}function d(e,t,i){return(void 0===t||t<=e)&&(void 0===i||e<=i)}function z(e,t,i){return e<t?t:i<e?i:e}function r(e,t,s={},a=0,i=""){i+=`<${Object.keys(s).reduce((e,t)=>{let i=s[t];return`${e} ${t}="${i="function"==typeof i?i(a):i}"`},e)}></${e}>`;var n=a+1;return n<t?r(e,t,s,n,i):i}function e(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function a(e){return new Date(e).setHours(0,0,0,0)}function l(){return(new Date).setHours(0,0,0,0)}function S(...e){switch(e.length){case 0:return l();case 1:return a(e[0])}var t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function c(e,t){e=new Date(e);return e.setDate(e.getDate()+t)}function u(e,t){e=new Date(e),t=e.getMonth()+t;let i=t%12;i<0&&(i+=12);t=e.setMonth(t);return e.getMonth()!==i?e.setDate(0):t}function h(e,t){var e=new Date(e),i=e.getMonth(),t=e.setFullYear(e.getFullYear()+t);return 1===i&&2===e.getMonth()?e.setDate(0):t}function W(e,t){return(e-t+7)%7}function n(e,t,i=0){var s=new Date(e).getDay();return c(e,W(t,i)-W(s,i))}function R(e,t){return Math.round((e-t)/6048e5)+1}function q(e){e=n(e,4,1);return R(e,n(new Date(e).setMonth(0,4),4,1))}function j(e,t){var i=n(new Date(e).setMonth(0,1),t,t),s=n(e,t,t),i=R(s,i);return!(i<53)&&s===n(new Date(e).setDate(32),t,t)?1:i}function H(e){return j(e,0)}function Y(e){return j(e,6)}function s(e,t){e=new Date(e).getFullYear();return Math.floor(e/t)*t}function M(e,t,i){return 1!==t&&2!==t?e:(e=new Date(e),1===t?i?e.setMonth(e.getMonth()+1,0):e.setDate(1):i?e.setFullYear(e.getFullYear()+1,0,0):e.setMonth(0,1),e.setHours(0,0,0,0))}const E=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,K=/[\s!-/:-@[-`{-~年月日]+/;let i={};const I={y:(e,t)=>new Date(e).setFullYear(parseInt(t,10)),m(t,e,i){const s=new Date(t);let a=parseInt(e,10)-1;if(isNaN(a)){if(!e)return NaN;const t=e.toLowerCase(),s=e=>e.toLowerCase().startsWith(t);if((a=(a=i.monthsShort.findIndex(s))<0?i.months.findIndex(s):a)<0)return NaN}return s.setMonth(a),s.getMonth()!==function e(t){return-1<t?t%12:e(t+12)}(a)?s.setDate(0):s.getTime()},d:(e,t)=>new Date(e).setDate(parseInt(t,10))},P={d:e=>e.getDate(),dd:e=>t(e.getDate(),2),D:(e,t)=>t.daysShort[e.getDay()],DD:(e,t)=>t.days[e.getDay()],m:e=>e.getMonth()+1,mm:e=>t(e.getMonth()+1,2),M:(e,t)=>t.monthsShort[e.getMonth()],MM:(e,t)=>t.months[e.getMonth()],y:e=>e.getFullYear(),yy:e=>t(e.getFullYear(),2).slice(-2),yyyy:e=>t(e.getFullYear(),4)};function t(e,t){return e.toString().padStart(t,"0")}function $(e){if("string"!=typeof e)throw new Error("Invalid date format.");if(e in i)return i[e];const n=e.split(E),a=e.match(new RegExp(E,"g"));if(0===n.length||!a)throw new Error("Invalid date format.");const t=a.map(e=>P[e]),r=Object.keys(I).reduce((e,t)=>(a.find(e=>"D"!==e[0]&&e[0].toLowerCase()===t)&&e.push(t),e),[]);return i[e]={parser(e,i){const s=e.split(K).reduce((e,t,i)=>{return 0<t.length&&a[i]&&("M"===(i=a[i][0])?e.m=t:"D"!==i&&(e[i]=t)),e},{});return r.reduce((e,t)=>{t=I[t](e,s[t],i);return isNaN(t)?e:t},l())},formatter:(s,a)=>t.reduce((e,t,i)=>e+(""+n[i]+t(s,a)),"")+o(n)}}function x(e,t,i){if(e instanceof Date||"number"==typeof e){const t=a(e);return isNaN(t)?void 0:t}var s;if(e)return"today"===e?l():t&&t.toValue?(s=t.toValue(e,t,i),isNaN(s)?void 0:a(s)):$(t).parser(e,i)}function p(e,t,i){return isNaN(e)||!e&&0!==e?"":(e="number"==typeof e?new Date(e):e,t.toDisplay?t.toDisplay(e,t,i):$(t).formatter(e,i))}const J=document.createRange();function C(e){return J.createContextualFragment(e)}function U(e){return e.parentElement||(e.parentNode instanceof ShadowRoot?e.parentNode.host:void 0)}function f(e){return e.getRootNode().activeElement===e}function m(e){"none"!==e.style.display&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function v(e){"none"===e.style.display&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function g(e){e.firstChild&&(e.removeChild(e.firstChild),g(e))}const y=new WeakMap,{addEventListener:X,removeEventListener:Z}=EventTarget.prototype;function w(e,t){let i=y.get(e);i||(i=[],y.set(e,i)),t.forEach(e=>{X.call(...e),i.push(e)})}function G(e){var t=y.get(e);t&&(t.forEach(e=>{Z.call(...e)}),y.delete(e))}if(!Event.prototype.composedPath){const o=(e,t=[])=>{let i;return t.push(e),e.parentNode?i=e.parentNode:e.host?i=e.host:e.defaultView&&(i=e.defaultView),i?o(i,t):t};Event.prototype.composedPath=function(){return o(this.target)}}function Q(e,t){var i="function"==typeof t?t:e=>e instanceof Element&&e.matches(t);return function e(t,i,s){var[t,...a]=t;return i(t)?t:t!==s&&"HTML"!==t.tagName&&0!==a.length?e(a,i,s):void 0}(e.composedPath(),i,e.currentTarget)}const k={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},L={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,clearButton:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,enableOnReadonly:!0,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"»",orientation:"auto",pickLevel:0,prevArrow:"«",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayButton:!1,todayButtonMode:0,todayHighlight:!1,updateOnBlur:!0,weekNumbers:0,weekStart:0},{language:O,format:ee,weekStart:te}=L;function ie(e,t){return e.length<6&&0<=t&&t<7?D(e,t):e}function se(e,t){switch(4===e?6===t?3:1+!t:e){case 1:return q;case 2:return H;case 3:return Y}}function ae(e,t,i){return t.weekStart=e,t.weekEnd=(e+6)%7,4===i&&(t.getWeekNumber=se(4,e)),e}function ne(e,t,i,s){e=x(e,t,i);return void 0!==e?e:s}function A(e,t,i=3){e=parseInt(e,10);return 0<=e&&e<=i?e:t}function N(e,t,i,s=void 0){t in e&&(i in e||(e[i]=s?s(e[t]):e[t]),delete e[t])}function b(i,t){const s=Object.assign({},i),a={},n=t.constructor.locales,r=!!t.rangeSideIndex;let{datesDisabled:e,format:o,language:l,locale:d,maxDate:c,maxView:u,minDate:h,pickLevel:p,startView:f,weekNumbers:m,weekStart:v}=t.config||{};if(N(s,"calendarWeeks","weekNumbers",e=>e?1:0),N(s,"clearBtn","clearButton"),N(s,"todayBtn","todayButton"),N(s,"todayBtnMode","todayButtonMode"),s.language){let e;if(s.language!==l&&(n[s.language]?e=s.language:n[e=s.language.split("-")[0]]||(e=!1)),delete s.language,e){l=a.language=e;const D=d||n[O];d=Object.assign({format:ee,weekStart:te},n[O]),l!==O&&Object.assign(d,n[l]),a.locale=d,o===D.format&&(o=a.format=d.format),v===D.weekStart&&(v=ae(d.weekStart,a,m))}}if(s.format){const i="function"==typeof s.format.toDisplay,D="function"==typeof s.format.toValue,t=E.test(s.format);(i&&D||t)&&(o=a.format=s.format),delete s.format}let g=p,y=("pickLevel"in s&&(g=A(s.pickLevel,p,2),delete s.pickLevel),g!==p&&(g>p&&("minDate"in s||(s.minDate=h),"maxDate"in s||(s.maxDate=c)),e&&!s.datesDisabled&&(s.datesDisabled=[]),p=a.pickLevel=g),h),w=c;if("minDate"in s){const i=S(0,0,1);(y=null===s.minDate?i:ne(s.minDate,o,d,y))!==i&&(y=M(y,p,!1)),delete s.minDate}if("maxDate"in s&&(void 0!==(w=null===s.maxDate?void 0:ne(s.maxDate,o,d,w))&&(w=M(w,p,!0)),delete s.maxDate),w<y?(h=a.minDate=w,c=a.maxDate=y):(h!==y&&(h=a.minDate=y),c!==w&&(c=a.maxDate=w)),s.datesDisabled){const i=s.datesDisabled;if("function"==typeof i)a.datesDisabled=null,a.checkDisabled=(e,t)=>i(new Date(e),t,r);else{const t=a.datesDisabled=i.reduce((e,t)=>{t=x(t,o,d);return void 0!==t?D(e,M(t,p,r)):e},[]);a.checkDisabled=e=>t.includes(e)}delete s.datesDisabled}if("defaultViewDate"in s){const i=x(s.defaultViewDate,o,d);void 0!==i&&(a.defaultViewDate=i),delete s.defaultViewDate}if("weekStart"in s){const i=Number(s.weekStart)%7;isNaN(i)||(v=ae(i,a,m)),delete s.weekStart}if(s.daysOfWeekDisabled&&(a.daysOfWeekDisabled=s.daysOfWeekDisabled.reduce(ie,[]),delete s.daysOfWeekDisabled),s.daysOfWeekHighlighted&&(a.daysOfWeekHighlighted=s.daysOfWeekHighlighted.reduce(ie,[]),delete s.daysOfWeekHighlighted),"weekNumbers"in s){let i=s.weekNumbers;if(i){const D="function"==typeof i?(e,t)=>i(new Date(e),t):se(i=parseInt(i,10),v);D&&(m=a.weekNumbers=i,a.getWeekNumber=D)}else m=a.weekNumbers=0,a.getWeekNumber=null;delete s.weekNumbers}if("maxNumberOfDates"in s){const i=parseInt(s.maxNumberOfDates,10);0<=i&&(a.maxNumberOfDates=i,a.multidate=1!==i),delete s.maxNumberOfDates}s.dateDelimiter&&(a.dateDelimiter=String(s.dateDelimiter),delete s.dateDelimiter);let k=u,b=("maxView"in s&&(k=A(s.maxView,u),delete s.maxView),(k=p>k?p:k)!==u&&(u=a.maxView=k),f);if("startView"in s&&(b=A(s.startView,b),delete s.startView),b<p?b=p:b>u&&(b=u),b!==f&&(a.startView=b),s.prevArrow){const i=C(s.prevArrow);0<i.childNodes.length&&(a.prevArrow=i.childNodes),delete s.prevArrow}if(s.nextArrow){const i=C(s.nextArrow);0<i.childNodes.length&&(a.nextArrow=i.childNodes),delete s.nextArrow}if("disableTouchKeyboard"in s&&(a.disableTouchKeyboard="ontouchstart"in document&&!!s.disableTouchKeyboard,delete s.disableTouchKeyboard),s.orientation){const i=s.orientation.toLowerCase().split(/\s+/g);a.orientation={x:i.find(e=>"left"===e||"right"===e)||"auto",y:i.find(e=>"top"===e||"bottom"===e)||"auto"},delete s.orientation}if("todayButtonMode"in s){switch(s.todayButtonMode){case 0:case 1:a.todayButtonMode=s.todayButtonMode}delete s.todayButtonMode}return Object.entries(s).forEach(([e,t])=>{void 0!==t&&e in L&&(a[e]=t)}),a}const re={show:{key:"ArrowDown"},hide:null,toggle:{key:"Escape"},prevButton:{key:"ArrowLeft",ctrlOrMetaKey:!0},nextButton:{key:"ArrowRight",ctrlOrMetaKey:!0},viewSwitch:{key:"ArrowUp",ctrlOrMetaKey:!0},clearButton:{key:"Backspace",ctrlOrMetaKey:!0},todayButton:{key:".",ctrlOrMetaKey:!0},exitEditMode:{key:"ArrowDown",ctrlOrMetaKey:!0}},oe=e=>e.map(e=>`<button type="button" class="%buttonClass% ${e}" tabindex="-1"></button>`).join(""),le=e(`<div class="datepicker">
  <div class="datepicker-picker">
    <div class="datepicker-header">
      <div class="datepicker-title"></div>
      <div class="datepicker-controls">
        ${oe(["prev-button prev-btn","view-switch","next-button next-btn"])}
      </div>
    </div>
    <div class="datepicker-main"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls">
        ${oe(["today-button today-btn","clear-button clear-btn"])}
      </div>
    </div>
  </div>
</div>`),de=e(`<div class="days">
  <div class="days-of-week">${r("span",7,{class:"dow"})}</div>
  <div class="datepicker-grid">${r("span",42)}</div>
</div>`),ce=e(`<div class="week-numbers calendar-weeks">
  <div class="days-of-week"><span class="dow"></span></div>
  <div class="weeks">${r("span",6,{class:"week"})}</div>
</div>`);class ue{constructor(e,t){Object.assign(this,t,{picker:e,element:C('<div class="datepicker-view"></div>').firstChild,selected:[],isRangeEnd:!!e.datepicker.rangeSideIndex}),this.init(this.picker.datepicker.config)}init(e){"pickLevel"in e&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}prepareForRender(e,t,i){this.disabled=[];var s=this.picker;s.setViewSwitchLabel(e),s.setPrevButtonDisabled(t),s.setNextButtonDisabled(i)}setDisabled(e,t){t.add("disabled"),D(this.disabled,e)}performBeforeHook(e,t){let i=this.beforeShow(new Date(t));switch(typeof i){case"boolean":i={enabled:i};break;case"string":i={classes:i}}if(i){var s=e.classList;if(!1===i.enabled&&this.setDisabled(t,s),i.classes){const e=i.classes.split(/\s+/);s.add(...e),e.includes("disabled")&&this.setDisabled(t,s)}i.content&&(a=e,t=i.content,g(a),t instanceof DocumentFragment?a.appendChild(t):"string"==typeof t?a.appendChild(C(t)):"function"==typeof t.forEach&&t.forEach(e=>{a.appendChild(e)}))}var a}renderCell(e,t,i,s,{selected:a,range:n},r,o=[]){e.textContent=t,this.isMinView&&(e.dataset.date=s);var l=e.classList;if(e.className="datepicker-cell "+this.cellClass,i<this.first?l.add("prev"):i>this.last&&l.add("next"),l.add(...o),(r||this.checkDisabled(s,this.id))&&this.setDisabled(s,l),n){const[e,t]=n;i>e&&i<t&&l.add("range"),i===e&&l.add("range-start"),i===t&&l.add("range-end")}a.includes(i)&&l.add("selected"),i===this.focused&&l.add("focused"),this.beforeShow&&this.performBeforeHook(e,s)}refreshCell(e,t,i,[s,a]){e=e.classList;e.remove("range","range-start","range-end","selected","focused"),s<t&&t<a&&e.add("range"),t===s&&e.add("range-start"),t===a&&e.add("range-end"),i.includes(t)&&e.add("selected"),t===this.focused&&e.add("focused")}changeFocusedCell(e){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}class he extends ue{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const e=C(de).firstChild;this.dow=e.firstChild,this.grid=e.lastChild,this.element.appendChild(e)}super.init(e)}setOptions(e){let t;var i;if("minDate"in e&&(this.minDate=e.minDate),"maxDate"in e&&(this.maxDate=e.maxDate),e.checkDisabled&&(this.checkDisabled=e.checkDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),"todayHighlight"in e&&(this.todayHighlight=e.todayHighlight),"weekStart"in e&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale&&(i=this.locale=e.locale,this.dayNames=i.daysMin,this.switchLabelFormat=i.titleFormat,t=!0),"beforeShowDay"in e&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),"weekNumbers"in e)if(e.weekNumbers&&!this.weekNumbers){const e=C(ce).firstChild;this.weekNumbers={element:e,dow:e.firstChild,weeks:e.lastChild},this.element.insertBefore(e,this.element.firstChild)}else this.weekNumbers&&!e.weekNumbers&&(this.element.removeChild(this.weekNumbers.element),this.weekNumbers=null);"getWeekNumber"in e&&(this.getWeekNumber=e.getWeekNumber),"showDaysOfWeek"in e&&(e.showDaysOfWeek?(v(this.dow),this.weekNumbers&&v(this.weekNumbers.dow)):(m(this.dow),this.weekNumbers&&m(this.weekNumbers.dow))),t&&Array.from(this.dow.children).forEach((e,t)=>{t=(this.weekStart+t)%7;e.textContent=this.dayNames[t],e.className=this.daysOfWeekDisabled.includes(t)?"dow disabled":"dow"})}updateFocus(){var e=new Date(this.picker.viewDate),t=e.getFullYear(),e=e.getMonth(),i=S(t,e,1),s=n(i,this.weekStart,this.weekStart);this.first=i,this.last=S(t,e+1,0),this.start=s,this.focused=this.picker.viewDate}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){if(this.today=this.todayHighlight?l():void 0,this.prepareForRender(p(this.focused,this.switchLabelFormat,this.locale),this.first<=this.minDate,this.last>=this.maxDate),this.weekNumbers){const s=this.weekStart,a=n(this.first,s,s);Array.from(this.weekNumbers.weeks.children).forEach((e,t)=>{var i=c(a,7*t);e.textContent=this.getWeekNumber(i,s),3<t&&e.classList[i>this.last?"add":"remove"]("next")})}Array.from(this.grid.children).forEach((e,t)=>{var t=c(this.start,t),i=new Date(t),s=i.getDay(),a=[];this.today===t&&a.push("today"),this.daysOfWeekHighlighted.includes(s)&&a.push("highlighted"),this.renderCell(e,i.getDate(),t,t,this,t<this.minDate||t>this.maxDate||this.daysOfWeekDisabled.includes(s),a)})}refresh(){const t=this.range||[];Array.from(this.grid.children).forEach(e=>{this.refreshCell(e,Number(e.dataset.date),this.selected,t)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/864e5))}}function pe(e,t){var i,s,a;if(e&&e[0]&&e[1])return[[e,i],[s,a]]=e,t<e||s<t?void 0:[e===t?i:-1,s===t?a:12]}class fe extends ue{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(C(r("span",12,{"data-month":e=>e}))),this.first=0,this.last=11),super.init(e)}setOptions(e){var t;e.locale&&(this.monthNames=e.locale.monthsShort),"minDate"in e&&(void 0===e.minDate?this.minYear=this.minMonth=this.minDate=void 0:(t=new Date(e.minDate),this.minYear=t.getFullYear(),this.minMonth=t.getMonth(),this.minDate=t.setDate(1))),"maxDate"in e&&(void 0===e.maxDate?this.maxYear=this.maxMonth=this.maxDate=void 0:(t=new Date(e.maxDate),this.maxYear=t.getFullYear(),this.maxMonth=t.getMonth(),this.maxDate=S(this.maxYear,this.maxMonth+1,0))),e.checkDisabled&&(this.checkDisabled=this.isMinView||null===e.datesDisabled?e.checkDisabled:()=>!1),"beforeShowMonth"in e&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){var e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>{var t=new Date(t),i=t.getFullYear(),t=t.getMonth();return void 0===e[i]?e[i]=[t]:D(e[i],t),e},{}),t&&t.dates&&(this.range=t.dates.map(e=>{e=new Date(e);return isNaN(e)?void 0:[e.getFullYear(),e.getMonth()]}))}render(){this.prepareForRender(this.year,this.year<=this.minYear,this.year>=this.maxYear);const s=this.selected[this.year]||[],a=this.year<this.minYear||this.year>this.maxYear,n=this.year===this.minYear,r=this.year===this.maxYear,o=pe(this.range,this.year);Array.from(this.grid.children).forEach((e,t)=>{var i=M(new Date(this.year,t,1),1,this.isRangeEnd);this.renderCell(e,this.monthNames[t],t,i,{selected:s,range:o},a||n&&t<this.minMonth||r&&t>this.maxMonth)})}refresh(){const i=this.selected[this.year]||[],s=pe(this.range,this.year)||[];Array.from(this.grid.children).forEach((e,t)=>{this.refreshCell(e,t,i,s)})}refreshFocus(){this.changeFocusedCell(this.focused)}}class me extends ue{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=10*this.step,this.beforeShowOption="beforeShow"+[...this.cellClass].reduce((e,t,i)=>e+(i?t:t.toUpperCase()),""),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(C(r("span",12)))),super.init(e)}setOptions(e){"minDate"in e&&(void 0===e.minDate?this.minYear=this.minDate=void 0:(this.minYear=s(e.minDate,this.step),this.minDate=S(this.minYear,0,1))),"maxDate"in e&&(void 0===e.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=s(e.maxDate,this.step),this.maxDate=S(this.maxYear,11,31))),e.checkDisabled&&(this.checkDisabled=this.isMinView||null===e.datesDisabled?e.checkDisabled:()=>!1),this.beforeShowOption in e&&(e=e[this.beforeShowOption],this.beforeShow="function"==typeof e?e:void 0)}updateFocus(){var e=new Date(this.picker.viewDate),t=s(e,this.navStep),i=t+9*this.step;this.first=t,this.last=i,this.start=t-this.step,this.focused=s(e,this.step)}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>D(e,s(t,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(e=>{if(void 0!==e)return s(e,this.step)}))}render(){this.prepareForRender(this.first+"-"+this.last,this.first<=this.minYear,this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{var t=this.start+t*this.step,i=M(new Date(t,0,1),2,this.isRangeEnd);e.dataset.year=t,this.renderCell(e,t,t,i,this,t<this.minYear||t>this.maxYear)})}refresh(){const t=this.range||[];Array.from(this.grid.children).forEach(e=>{this.refreshCell(e,Number(e.textContent),this.selected,t)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/this.step))}}function F(e,t){var i={bubbles:!0,cancelable:!0,detail:{date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e}};e.element.dispatchEvent(new CustomEvent(t,i))}function B(e,t){var{config:e,picker:i}=e,{currentView:s,viewDate:a}=i;let n;switch(s.id){case 0:n=u(a,t);break;case 1:n=h(a,t);break;default:n=h(a,t*s.navStep)}n=z(n,e.minDate,e.maxDate),i.changeFocus(n).render()}function ve(e){var t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function ge(e){e.setDate({clear:!0})}function ye(e){var t=l();1===e.config.todayButtonMode?e.setDate(t,{forceRefresh:!0,viewDate:t}):e.setFocusedDate(t,!0)}function we(e){var t=()=>{e.config.updateOnBlur?e.update({revert:!0}):e.refresh("input"),e.hide()},i=e.element;f(i)?i.addEventListener("blur",t,{once:!0}):t()}function ke(e,t){var i,s,t=Q(t,".datepicker-cell");t&&!t.classList.contains("disabled")&&({id:s,isMinView:i}=e.picker.currentView,t=t.dataset,i?e.setDate(Number(t.date)):(i=e,e=Number(1===s?t.month:t.year),i=i.picker,s=new Date(i.viewDate),t=i.currentView.id,e=1===t?u(s,e-s.getMonth()):h(s,e-s.getFullYear()),i.changeFocus(e).changeView(t-1).render()))}function be(e){e.preventDefault()}const De=["left","top","right","bottom"].reduce((e,t)=>(e[t]="datepicker-orient-"+t,e),{}),Se=e=>e&&e+"px";function Me(e,t){if("title"in t&&(t.title?(e.controls.title.textContent=t.title,v):(e.controls.title.textContent="",m))(e.controls.title),t.prevArrow){const i=e.controls.prevButton;g(i),t.prevArrow.forEach(e=>{i.appendChild(e.cloneNode(!0))})}if(t.nextArrow){const s=e.controls.nextButton;g(s),t.nextArrow.forEach(e=>{s.appendChild(e.cloneNode(!0))})}if(t.locale&&(e.controls.todayButton.textContent=t.locale.today,e.controls.clearButton.textContent=t.locale.clear),"todayButton"in t&&(t.todayButton?v:m)(e.controls.todayButton),"minDate"in t||"maxDate"in t){const{minDate:t,maxDate:a}=e.datepicker.config;e.controls.todayButton.disabled=!d(l(),t,a)}"clearButton"in t&&(t.clearButton?v:m)(e.controls.clearButton)}function Ee(e){var{dates:e,config:t,rangeSideIndex:i}=e;return z(0<e.length?o(e):M(t.defaultViewDate,t.pickLevel,i),t.minDate,t.maxDate)}function xe(e,t){"_oldViewDate"in e||t===e.viewDate||(e._oldViewDate=e.viewDate),e.viewDate=t;var{id:e,year:i,first:s,last:a}=e.currentView,n=new Date(t).getFullYear();switch(e){case 0:return t<s||a<t;case 1:return n!==i;default:return n<s||a<n}}function Ce(e){return window.getComputedStyle(e).direction}class Le{constructor(e){var{config:t,inputField:i}=this.datepicker=e,s=le.replace(/%buttonClass%/g,t.buttonClass),s=this.element=C(s).firstChild,[a,n,r]=s.firstChild.children,o=a.firstElementChild,[a,l,d]=a.lastElementChild.children,[r,c]=r.firstChild.children,o={title:o,prevButton:a,viewSwitch:l,nextButton:d,todayButton:r,clearButton:c},a=(this.main=n,this.controls=o,i?"dropdown":"inline");s.classList.add("datepicker-"+a),Me(this,t),this.viewDate=Ee(e),w(e,[[s,"mousedown",be],[n,"click",ke.bind(null,e)],[o.viewSwitch,"click",function(e){ve(e)}.bind(null,e)],[o.prevButton,"click",function(e){B(e,-1)}.bind(null,e)],[o.nextButton,"click",function(e){B(e,1)}.bind(null,e)],[o.todayButton,"click",ye.bind(null,e)],[o.clearButton,"click",ge.bind(null,e)]]),this.views=[new he(this),new fe(this),new me(this,{id:2,name:"years",cellClass:"year",step:1}),new me(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):i.after(this.element)}setOptions(t){Me(this,t),this.views.forEach(e=>{e.init(t,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){var e,t,i,s;this.active||({datepicker:e,element:t}=this,(i=e.inputField)?((s=Ce(i))!==Ce(U(t))?t.dir=s:t.dir&&t.removeAttribute("dir"),this.place(),t.classList.add("active"),e.config.disableTouchKeyboard&&i.blur()):t.classList.add("active"),this.active=!0,F(e,"show"))}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,F(this.datepicker,"hide"))}place(){const{classList:e,style:t}=this.element;t.display="block";var{width:i,height:s}=this.element.getBoundingClientRect(),a=this.element.offsetParent,{config:n,inputField:r}=(t.display="",this.datepicker),{left:o,top:l,right:d,bottom:c,width:u,height:h}=r.getBoundingClientRect();let{x:p,y:f}=n.orientation,m=o,v=l;if(a!==document.body&&a){const e=a.getBoundingClientRect();m-=e.left-a.scrollLeft,v-=e.top-a.scrollTop}else m+=window.scrollX,v+=window.scrollY;n=function e(t){t=U(t);if(t!==document.body&&t)return"visible"!==window.getComputedStyle(t).overflow?t:e(t)}(r);let g=0,y=0,{clientWidth:w,clientHeight:k}=document.documentElement;if(n){const e=n.getBoundingClientRect();0<e.top&&(y=e.top),0<e.left&&(g=e.left),e.right<w&&(w=e.right),e.bottom<k&&(k=e.bottom)}let b=0;"auto"===p&&(o<g?(p="left",b=g-o):o+i>w?(p="right",w<d&&(b=w-d)):p="rtl"!==Ce(r)||d-i<g?"left":"right"),"right"===p&&(m+=u-i),m+=b,"top"===(f="auto"===f?l-s>y&&c+s>k?"top":"bottom":f)?v-=s:v+=h,e.remove(...Object.values(De)),e.add(De[p],De[f]),t.left=Se(m),t.top=Se(v)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevButtonDisabled(e){this.controls.prevButton.disabled=e}setNextButtonDisabled(e){this.controls.nextButton.disabled=e}changeView(e){var t=this.currentView;return e!==t.id&&(this._oldView||(this._oldView=t),this.currentView=this.views[e],this._renderMethod="render"),this}changeFocus(e){return this._renderMethod=xe(this,e)?"render":"refreshFocus",this.views.forEach(e=>{e.updateFocus()}),this}update(e=void 0){e=void 0===e?Ee(this.datepicker):e;return this._renderMethod=xe(this,e)?"render":"refresh",this.views.forEach(e=>{e.updateFocus(),e.updateSelection()}),this}render(e=!0){var{currentView:t,datepicker:i,_oldView:s}=this,a=new Date(this._oldViewDate),e=e&&this._renderMethod||"render";if(delete this._oldView,delete this._oldViewDate,delete this._renderMethod,t[e](),s&&(this.main.replaceChild(t.element,s.element),F(i,"changeView")),!isNaN(a)){const e=new Date(this.viewDate);e.getFullYear()!==a.getFullYear()&&F(i,"changeYear"),e.getMonth()!==a.getMonth()&&F(i,"changeMonth")}}}function Oe(e,t,i){const s=e.picker,a=s.currentView,n=a.step||1;let r,o=s.viewDate;switch(a.id){case 0:o=c(o,i?7*t:t),r=c;break;case 1:o=u(o,i?4*t:t),r=u;break;default:o=h(o,t*(i?4:1)*n),r=h}void 0!==(o=function e(t,i,s,a,n,r){if(d(t,n,r))return a(t)?e(i(t,s),i,s,a,n,r):t}(o,r,t<0?-n:n,e=>a.disabled.includes(e),a.minDate,a.maxDate))&&s.changeFocus(o).render()}function Ae(e,t){return e.map(e=>p(e,t.format,t.locale)).join(t.dateDelimiter)}function Ne(e,t,i=!1){if(0===t.length)return i?[]:void 0;const{config:s,dates:a,rangeSideIndex:n}=e,{pickLevel:r,maxNumberOfDates:o}=s;let l=t.reduce((e,t)=>{t=x(t,s.format,s.locale);return void 0===t||!d(t=M(t,r,n),s.minDate,s.maxDate)||e.includes(t)||s.checkDisabled(t,r)||!(0<r)&&s.daysOfWeekDisabled.includes(new Date(t).getDay())||e.push(t),e},[]);return 0!==l.length?(s.multidate&&!i&&(l=l.reduce((e,t)=>(a.includes(t)||e.push(t),e),a.filter(e=>!l.includes(e)))),o&&l.length>o?l.slice(-1*o):l):void 0}function V(e,t=3,i=!0,s=void 0){var{config:a,picker:n,inputField:r}=e;if(2&t){const e=n.active?a.pickLevel:a.startView;n.update(s).changeView(e).render(i)}1&t&&r&&(r.value=Ae(e.dates,a))}function Fe(e,t,i){var s=e.config;let{clear:a,render:n,autohide:r,revert:o,forceRefresh:l,viewDate:d}=i;(n=void 0===n?!0:n)?void 0===r&&(r=s.autohide):r=l=!1,d=x(d,s.format,s.locale);i=Ne(e,t,a);(i||o)&&(i&&i.toString()!==e.dates.toString()?(e.dates=i,V(e,n?3:1,!0,d),F(e,"changeDate")):V(e,l?3:1,!0,d),r)&&e.hide()}function Be(t,i){return i?e=>p(e,i,t.config.locale):e=>new Date(e)}class Ve{constructor(e,t={},i=void 0){(e.datepicker=this).element=e,this.dates=[];var n,s=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:l(),maxDate:void 0,minDate:void 0},b(L,this));let a;if("INPUT"===e.tagName?((a=this.inputField=e).classList.add("datepicker-input"),t.container&&(s.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container))):s.container=e,i){const e=i.inputs.indexOf(a),t=i.datepickers;if(e<0||1<e||!Array.isArray(t))throw Error("Invalid rangepicker object.");(t[e]=this).rangepicker=i,this.rangeSideIndex=e}this._options=t,Object.assign(s,b(t,this)),s.shortcutKeys=(n=t.shortcutKeys||{},Object.keys(re).reduce((e,t)=>{var i,s=(void 0===n[t]?re:n)[t],a=s&&s.key;return a&&"string"==typeof a&&(i={key:a,ctrlOrMetaKey:!!(s.ctrlOrMetaKey||s.ctrlKey||s.metaKey)},1<a.length&&(i.altKey=!!s.altKey,i.shiftKey=!!s.shiftKey),e[t]=i),e},{}));i=_(e.value||e.dataset.date,s.dateDelimiter),delete e.dataset.date,t=Ne(this,i),t&&0<t.length&&(this.dates=t),a&&(a.value=Ae(this.dates,s)),i=this.picker=new Le(this),t=[e,"keydown",function(i,s){const{config:t,picker:e,editMode:a}=i,n=e.active,{key:r,altKey:o,shiftKey:l}=s,d=s.ctrlKey||s.metaKey,c=()=>{s.preventDefault(),s.stopPropagation()};if("Tab"===r)we(i);else if("Enter"===r)if(n)if(a)i.exitEditMode({update:!0,autohide:t.autohide});else{const s=e.currentView;s.isMinView?i.setDate(e.viewDate):(e.changeView(s.id-1).render(),c())}else i.update();else{const h=t.shortcutKeys,p={key:r,ctrlOrMetaKey:d,altKey:o,shiftKey:l},f=Object.keys(h).find(e=>{const t=h[e];return!Object.keys(t).find(e=>t[e]!==p[e])});if(f){let e;if("toggle"===f?e=f:a?"exitEditMode"===f&&(e=f):n?"hide"===f?e=f:"prevButton"===f?e=[B,[i,-1]]:"nextButton"===f?e=[B,[i,1]]:"viewSwitch"===f?e=[ve,[i]]:t.clearButton&&"clearButton"===f?e=[ge,[i]]:t.todayButton&&"todayButton"===f&&(e=[ye,[i]]):"show"===f&&(e=f),e)return Array.isArray(e)?e[0].apply(null,e[1]):i[e](),void c()}var u;n&&!a&&(u=(e,t)=>{l||d||o?i.enterEditMode():(Oe(i,e,t),s.preventDefault())},"ArrowLeft"===r?u(-1,!1):"ArrowRight"===r?u(1,!1):"ArrowUp"===r?u(-1,!0):"ArrowDown"===r?u(1,!0):("Backspace"===r||"Delete"===r||r&&1===r.length&&!d)&&i.enterEditMode())}}.bind(null,this)];a?w(this,[t,[a,"focus",function(e){e.config.showOnFocus&&!e._showing&&e.show()}.bind(null,this)],[a,"mousedown",function(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=f(i),i._clicking=setTimeout(()=>{delete i._active,delete i._clicking},2e3))}.bind(null,this)],[a,"click",function(e,t){(t=t.target)._clicking&&(clearTimeout(t._clicking),delete t._clicking,t._active&&e.enterEditMode(),delete t._active,e.config.showOnClick)&&e.show()}.bind(null,this)],[a,"paste",function(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}.bind(null,this)],[document,"mousedown",function(e,t){const{element:i,picker:s}=e;if(s.active||f(i)){const a=s.element;Q(t,e=>e===i||e===a)||we(e)}}.bind(null,this)],[window,"resize",i.place.bind(i)]]):(w(this,[t]),this.show())}static formatDate(e,t,i){return p(e,t,i&&k[i]||k.en)}static parseDate(e,t,i){return x(e,t,i&&k[i]||k.en)}static get locales(){return k}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){var t=b(e,this);Object.assign(this._options,e),Object.assign(this.config,t),this.picker.setOptions(t),V(this,3)}show(){if(this.inputField){var{config:e,inputField:t}=this;if(t.disabled||t.readOnly&&!e.enableOnReadonly)return;f(t)||e.disableTouchKeyboard||(this._showing=!0,t.focus(),delete this._showing)}this.picker.show()}hide(){this.inputField&&(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}toggle(){this.picker.active?this.inputField&&this.picker.hide():this.show()}destroy(){this.hide(),G(this),this.picker.detach();var e=this.element;return e.classList.remove("datepicker-input"),delete e.datepicker,this}getDate(e=void 0){e=Be(this,e);return this.config.multidate?this.dates.map(e):0<this.dates.length?e(this.dates[0]):void 0}setDate(...e){var t=[...e],i={},e=o(e);!e||"object"!=typeof e||Array.isArray(e)||e instanceof Date||Object.assign(i,t.pop()),Fe(this,Array.isArray(t[0])?t[0]:t,i)}update(e=void 0){this.inputField&&(e=Object.assign(e||{},{clear:!0,render:!0,viewDate:void 0}),Fe(this,_(this.inputField.value,this.config.dateDelimiter),e))}getFocusedDate(e=void 0){return Be(this,e)(this.picker.viewDate)}setFocusedDate(e,t=!1){var{config:i,picker:s,active:a,rangeSideIndex:n}=this,r=i.pickLevel,e=x(e,i.format,i.locale);void 0!==e&&(s.changeFocus(M(e,r,n)),a&&t&&s.changeView(r),s.render())}refresh(e=void 0,t=!1){e&&"string"!=typeof e&&(t=e,e=void 0),V(this,"picker"===e?2:"input"===e?1:3,!t)}enterEditMode(){var e=this.inputField;e&&!e.readOnly&&this.picker.active&&!this.editMode&&(this.editMode=!0,e.classList.add("in-edit"))}exitEditMode(e=void 0){this.inputField&&this.editMode&&(e=Object.assign({update:!1},e),delete this.editMode,this.inputField.classList.remove("in-edit"),e.update)&&this.update(e)}}function Te(e){e=Object.assign({},e);return delete e.inputs,delete e.allowOneSidedRange,delete e.maxNumberOfDates,e}function T(e,t){var i,s,a,n,r,o,l;e._updating||(e._updating=!0,void 0!==(t=t.target).datepicker&&([s,a]=i=e.datepickers,n={render:!1},o=i[t=e.inputs.indexOf(t)].dates[0],l=i[r=0===t?1:0].dates[0],void 0!==o&&void 0!==l?0===t&&l<o?(s.setDate(l,n),a.setDate(o,n)):1===t&&o<l&&(s.setDate(o,n),a.setDate(l,n)):e.allowOneSidedRange||void 0===o&&void 0===l||(n.clear=!0,i[r].setDate(i[t].dates,n)),i.forEach(e=>{e.picker.update().render()}),delete e._updating))}window.Datepicker=Ve,window.DateRangePicker=class{constructor(e,t={}){let i=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){(e.rangepicker=this).element=e,this.inputs=i=i.slice(0,2),Object.freeze(i),this.allowOneSidedRange=!!t.allowOneSidedRange;const a=T.bind(null,this),n=Te(t),s=this.datepickers=[];i.forEach(e=>{var t,i,s;t=this,i=a,e=e,s=n,w(t,[[e,"changeDate",i]]),new Ve(e,s,t)}),Object.freeze(s),Object.defineProperty(this,"dates",{get:()=>s.map(e=>e.dates[0])}),0<s[0].dates.length?T(this,{target:i[0]}):0<s[1].dates.length&&T(this,{target:i[1]})}}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;const t=Te(e);this.datepickers.forEach(e=>{e.setOptions(t)})}destroy(){this.datepickers.forEach(e=>{e.destroy()}),G(this),delete this.element.rangepicker}getDates(t=void 0){const i=t?e=>p(e,t,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map(e=>void 0===e?e:i(e))}setDates(e,t){var{datepickers:[i,s],inputs:[a,n],dates:[r,o]}=this;this._updating=!0,i.setDate(e),s.setDate(t),delete this._updating,s.dates[0]!==o?T(this,{target:n}):i.dates[0]!==r&&T(this,{target:a})}}}(),function(e){var t=function(s,h,n){"use strict";var p,f,m,_,a,v,e,c,z,r,W,R,i,q,o,u,g,y,w,k,b,j,D,t,H,Y,l,d,K,I,P,S,M,$,E,J,U,X,x,C,L,O,Z,G,Q,ee,te,A,ie,se,ae,ne,N,F,B,re,V,oe,le,de,T,ce,ue,he,pe,fe,me,ve,ge={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(ve in f=s.lazySizesConfig||s.lazysizesConfig||{},ge)ve in f||(f[ve]=ge[ve]);return h&&h.getElementsByClassName?(m=h.documentElement,_=s.HTMLPictureElement,v="getAttribute",e=s[a="addEventListener"].bind(s),c=s.setTimeout,z=s.requestAnimationFrame||c,r=s.requestIdleCallback,W=/^picture$/i,R=["load","error","lazyincluded","_lazyloaded"],i={},q=Array.prototype.forEach,o=function(e,t){return i[t]||(i[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),i[t].test(e[v]("class")||"")&&i[t]},u=function(e,t){o(e,t)||e.setAttribute("class",(e[v]("class")||"").trim()+" "+t)},g=function(e,t){(t=o(e,t))&&e.setAttribute("class",(e[v]("class")||"").replace(t," "))},y=function(t,i,e){var s=e?a:"removeEventListener";e&&y(t,i),R.forEach(function(e){t[s](e,i)})},w=function(e,t,i,s,a){var n=h.createEvent("Event");return(i=i||{}).instance=p,n.initEvent(t,!s,!a),n.detail=i,e.dispatchEvent(n),n},k=function(e,t){var i;!_&&(i=s.picturefill||f.pf)?(t&&t.src&&!e[v]("srcset")&&e.setAttribute("srcset",t.src),i({reevaluate:!0,elements:[e]})):t&&t.src&&(e.src=t.src)},b=function(e,t){return(getComputedStyle(e,null)||{})[t]},j=function(e,t,i){for(i=i||e.offsetWidth;i<f.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},fe=[],me=pe=[],Ce._lsFlush=xe,D=Ce,t=function(i,e){return e?function(){D(i)}:function(){var e=this,t=arguments;D(function(){i.apply(e,t)})}},H=function(e){function t(){var e=n.now()-s;e<99?c(t,99-e):(r||a)(a)}var i,s,a=function(){i=null,e()};return function(){s=n.now(),i=i||c(t,99)}},se=/^img$/i,ae=/^iframe$/i,ne="onscroll"in s&&!/(gle|ing)bot/.test(navigator.userAgent),B=-1,re=function(e){return(Z=null==Z?"hidden"==b(h.body,"visibility"):Z)||!("hidden"==b(e.parentNode,"visibility")&&"hidden"==b(e,"visibility"))},G=ke,ee=F=N=0,te=f.throttleDelay,A=f.ricTimeout,ie=r&&49<A?function(){r(be,{timeout:A}),A!==f.ricTimeout&&(A=f.ricTimeout)}:t(function(){c(be)},!0),oe=t(De),le=function(e){oe({target:e.target})},de=t(function(t,e,i,s,a){var n,r,o,l,d;(r=w(t,"lazybeforeunveil",e)).defaultPrevented||(s&&(i?u(t,f.autosizesClass):t.setAttribute("sizes",s)),i=t[v](f.srcsetAttr),s=t[v](f.srcAttr),a&&(n=(l=t.parentNode)&&W.test(l.nodeName||"")),o=e.firesLoad||"src"in t&&(i||s||n),r={target:t},u(t,f.loadingClass),o&&(clearTimeout($),$=c(we,2500),y(t,le,!0)),n&&q.call(l.getElementsByTagName("source"),Se),i?t.setAttribute("srcset",i):s&&!n&&(ae.test(t.nodeName)?(e=s,0==(d=(l=t).getAttribute("data-load-mode")||f.iframeLoadMode)?l.contentWindow.location.replace(e):1==d&&(l.src=e)):t.src=s),a&&(i||n)&&k(t,{src:s})),t._lazyRace&&delete t._lazyRace,g(t,f.lazyClass),D(function(){var e=t.complete&&1<t.naturalWidth;o&&!e||(e&&u(t,f.fastLoadedClass),De(r),t._lazyCache=!0,c(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&F--},!0)}),ce=H(function(){f.loadMode=3,V()}),Y={_:function(){J=n.now(),p.elements=h.getElementsByClassName(f.lazyClass),S=h.getElementsByClassName(f.lazyClass+" "+f.preloadClass),e("scroll",V,!0),e("resize",V,!0),e("pageshow",function(e){var t;e.persisted&&(t=h.querySelectorAll("."+f.loadingClass)).length&&t.forEach&&z(function(){t.forEach(function(e){e.complete&&T(e)})})}),s.MutationObserver?new MutationObserver(V).observe(m,{childList:!0,subtree:!0,attributes:!0}):(m[a]("DOMNodeInserted",V,!0),m[a]("DOMAttrModified",V,!0),setInterval(V,999)),e("hashchange",V,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){h[a](e,V,!0)}),/d$|^c/.test(h.readyState)?Ee():(e("load",Ee),h[a]("DOMContentLoaded",V),c(Ee,2e4)),p.elements.length?(ke(),D._lsFlush()):V()},checkElems:V=function(e){var t;(e=!0===e)&&(A=33),Q||(Q=!0,(t=te-(n.now()-ee))<0&&(t=0),e||t<9?ie():c(ie,t))},unveil:T=function(e){var t,i,s,a;e._lazyRace||!(!(a="auto"==(s=(i=se.test(e.nodeName))&&(e[v](f.sizesAttr)||e[v]("sizes"))))&&M||!i||!e[v]("src")&&!e.srcset||e.complete||o(e,f.errorClass))&&o(e,f.lazyClass)||(t=w(e,"lazyunveilread").detail,a&&l.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,F++,de(e,t,a,s,i))},_aLSL:Me},I=t(function(e,t,i,s){var a,n,r;if(e._lazysizesWidth=s,e.setAttribute("sizes",s+="px"),W.test(t.nodeName||""))for(n=0,r=(a=t.getElementsByTagName("source")).length;n<r;n++)a[n].setAttribute("sizes",s);i.detail.dataAttr||k(e,i.detail)}),l={_:function(){K=h.getElementsByClassName(f.autosizesClass),e("resize",P)},checkElems:P=H(function(){var e,t=K.length;if(t)for(e=0;e<t;e++)ye(K[e])}),updateElem:ye},d=function(){!d.i&&h.getElementsByClassName&&(d.i=!0,l._(),Y._())},c(function(){f.init&&d()}),p={cfg:f,autoSizer:l,loader:Y,init:d,uP:k,aC:u,rC:g,hC:o,fire:w,gW:j,rAF:D}):{init:function(){},cfg:f,noSupport:!0};function ye(e,t,i){var s=e.parentNode;s&&(i=j(e,s,i),(t=w(e,"lazybeforesizes",{width:i,dataAttr:!!t})).defaultPrevented||(i=t.detail.width)&&i!==e._lazysizesWidth&&I(e,s,t,i))}function we(e){F--,e&&!(F<0)&&e.target||(F=0)}function ke(){var e,t,i,s,a,n,r,o,l,d,c,u=p.elements;if((E=f.loadMode)&&F<8&&(e=u.length)){for(t=0,B++;t<e;t++)if(u[t]&&!u[t]._lazyRace)if(!ne||p.prematureUnveil&&p.prematureUnveil(u[t]))T(u[t]);else if((r=u[t][v]("data-expand"))&&(a=+r)||(a=N),l||(l=!f.expand||f.expand<1?500<m.clientHeight&&500<m.clientWidth?500:370:f.expand,d=(p._defEx=l)*f.expFactor,c=f.hFac,Z=null,N<d&&F<1&&2<B&&2<E&&!h.hidden?(N=d,B=0):N=1<E&&1<B&&F<6?l:0),o!==a&&(U=innerWidth+a*c,X=innerHeight+a,n=-1*a,o=a),d=u[t].getBoundingClientRect(),(O=d.bottom)>=n&&(x=d.top)<=X&&(L=d.right)>=n*c&&(C=d.left)<=U&&(O||L||C||x)&&(f.loadHidden||re(u[t]))&&(M&&F<3&&!r&&(E<3||B<4)||function(e,t){var i,s=e,a=re(e);for(x-=t,O+=t,C-=t,L+=t;a&&(s=s.offsetParent)&&s!=h.body&&s!=m;)(a=0<(b(s,"opacity")||1))&&"visible"!=b(s,"overflow")&&(i=s.getBoundingClientRect(),a=L>i.left&&C<i.right&&O>i.top-1&&x<i.bottom+1);return a}(u[t],a))){if(T(u[t]),s=!0,9<F)break}else!s&&M&&!i&&F<4&&B<4&&2<E&&(S[0]||f.preloadAfterLoad)&&(S[0]||!r&&(O||L||C||x||"auto"!=u[t][v](f.sizesAttr)))&&(i=S[0]||u[t]);i&&!s&&T(i)}}function be(){Q=!1,ee=n.now(),G()}function De(e){var t=e.target;t._lazyCache?delete t._lazyCache:(we(e),u(t,f.loadedClass),g(t,f.loadingClass),y(t,le),w(t,"lazyloaded"))}function Se(e){var t,i=e[v](f.srcsetAttr);(t=f.customMedia[e[v]("data-media")||e[v]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)}function Me(){3==f.loadMode&&(f.loadMode=2),ce()}function Ee(){M||(n.now()-J<999?c(Ee,999):(M=!0,f.loadMode=3,V(),e("scroll",Me,!0)))}function xe(){var e=me;for(me=pe.length?fe:pe,he=!(ue=!0);e.length;)e.shift()();ue=!1}function Ce(e,t){ue&&!t?e.apply(this,arguments):(me.push(e),he||(he=!0,(h.hidden?c:z)(xe)))}}(e,e.document,Date);e.lazySizes=t,"object"==typeof module&&module.exports&&(module.exports=t)}("undefined"!=typeof window?window:{}),document.addEventListener("lazybeforeunveil",function(e){var t=e.target.getAttribute("data-bg");t&&(e.target.style.backgroundImage="url("+t+")")}),function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).Maska={})}(this,function(e){"use strict";var a=Object.defineProperty,i=(e,t,i)=>{return s=i,(t="symbol"!=typeof t?t+"":t)in(e=e)?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,i;var s};const s={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class n{constructor(e={}){i(this,"opts",{}),i(this,"memo",new Map);e={...e};if(null!=e.tokens){e.tokens=e.tokensReplace?{...e.tokens}:{...s,...e.tokens};for(const t of Object.values(e.tokens))"string"==typeof t.pattern&&(t.pattern=new RegExp(t.pattern))}else e.tokens=s;Array.isArray(e.mask)&&(1<e.mask.length?e.mask=[...e.mask].sort((e,t)=>e.length-t.length):e.mask=e.mask[0]??""),""===e.mask&&(e.mask=null),this.opts=e}masked(e){return this.process(e,this.findMask(e))}unmasked(e){return this.process(e,this.findMask(e),!1)}isEager(){return!0===this.opts.eager}isReversed(){return!0===this.opts.reversed}completed(e){var t=this.findMask(e);if(null==this.opts.mask||null==t)return!1;const i=this.process(e,t).length;return"string"==typeof this.opts.mask?i>=this.opts.mask.length:"function"==typeof this.opts.mask?i>=t.length:this.opts.mask.filter(e=>i>=e.length).length===this.opts.mask.length}findMask(t){var e=this.opts.mask;if(null==e)return null;if("string"==typeof e)return e;if("function"==typeof e)return e(t);const i=this.process(t,e.slice(-1).pop()??"",!1);return e.find(e=>this.process(t,e,!1).length>=i.length)??""}escapeMask(i){const s=[],a=[];return i.split("").forEach((e,t)=>{"!"===e&&"!"!==i[t-1]?a.push(t-a.length):s.push(e)}),{mask:s.join(""),escaped:a}}process(e,t,i=!0){if(null==t)return e;var s=`value=${e},mask=${t},masked=`+(i?1:0);if(this.memo.has(s))return this.memo.get(s);const{mask:a,escaped:n}=this.escapeMask(t),r=[],o=null!=this.opts.tokens?this.opts.tokens:{},l=this.isReversed()?-1:1,d=this.isReversed()?"unshift":"push",c=this.isReversed()?0:a.length-1,u=this.isReversed()?()=>-1<m&&-1<v:()=>m<a.length&&v<e.length,h=e=>!this.isReversed()&&e<=c||this.isReversed()&&e>=c;let p,f=-1,m=this.isReversed()?a.length-1:0,v=this.isReversed()?e.length-1:0;for(;u();){var g,y=a.charAt(m),w=o[y],k=null!=(null==w?void 0:w.transform)?w.transform(e.charAt(v)):e.charAt(v);if(n.includes(m)||null==w?(i&&!this.isEager()&&r[d](y),k!==y||this.isEager()?p=y:v+=l,this.isEager()||(m+=l)):(null!=k.match(w.pattern)?(r[d](k),w.repeated?(-1===f?f=m:m===c&&m!==f&&(m=f-l),c===f&&(m-=l)):w.multiple&&(m-=l),m+=l):w.multiple?(y=null!=(null==(y=r[v-l])?void 0:y.match(w.pattern)),g=a.charAt(m+l),y&&""!==g&&null==o[g]?(m+=l,v-=l):r[d]("")):k===p?p=void 0:w.optional&&(m+=l,v-=l),v+=l),this.isEager())for(;h(m)&&(null==o[a.charAt(m)]||n.includes(m));)i?r[d](a.charAt(m)):a.charAt(m)===e.charAt(v)&&(v+=l),m+=l}return this.memo.set(s,r.join("")),this.memo.get(s)}}const r=e=>JSON.parse(e.replaceAll("'",'"')),o=(e,t={})=>{var i,t={...t};return null!=e.dataset.maska&&""!==e.dataset.maska&&(t.mask=(i=e.dataset.maska).startsWith("[")&&i.endsWith("]")?r(i):i),null!=e.dataset.maskaEager&&(t.eager=l(e.dataset.maskaEager)),null!=e.dataset.maskaReversed&&(t.reversed=l(e.dataset.maskaReversed)),null!=e.dataset.maskaTokensReplace&&(t.tokensReplace=l(e.dataset.maskaTokensReplace)),null!=e.dataset.maskaTokens&&(t.tokens=(e=>{if(e.startsWith("{")&&e.endsWith("}"))return r(e);const i={};return e.split("|").forEach(e=>{const t=e.split(":");i[t[0]]={pattern:new RegExp(t[1]),optional:t[2]==="optional",multiple:t[2]==="multiple",repeated:t[2]==="repeated"}}),i})(e.dataset.maskaTokens)),t},l=e=>""===e||!!JSON.parse(e);class d{constructor(e,t={}){i(this,"items",new Map),i(this,"beforeinputEvent",e=>{var t=e.target,i=this.items.get(t);i.isEager()&&"inputType"in e&&e.inputType.startsWith("delete")&&i.unmasked(t.value).length<=1&&this.setMaskedValue(t,"")}),i(this,"inputEvent",t=>{if(!(t instanceof CustomEvent&&"input"===t.type&&null!=t.detail&&"object"==typeof t.detail&&"masked"in t.detail)){var i,s,a=t.target,n=this.items.get(a),r=a.value,o=a.selectionStart,l=a.selectionEnd;let e=r;if(n.isEager()&&(i=n.masked(r),""===(s=n.unmasked(r))&&"data"in t&&null!=t.data?e=t.data:s!==n.unmasked(i)&&(e=s)),this.setMaskedValue(a,e),"inputType"in t&&(t.inputType.startsWith("delete")||null!=o&&o<r.length))try{a.setSelectionRange(o,l)}catch{}}}),this.options=t,"string"==typeof e?this.init(Array.from(document.querySelectorAll(e)),this.getMaskOpts(t)):this.init("length"in e?Array.from(e):[e],this.getMaskOpts(t))}destroy(){for(const e of this.items.keys())e.removeEventListener("input",this.inputEvent),e.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(e,t){var i=this.items.get(e),e=new n(o(e,this.getMaskOpts(t)));return JSON.stringify(i.opts)!==JSON.stringify(e.opts)}needUpdateValue(e){var t=e.dataset.maskaValue;return null==t&&""!==e.value||null!=t&&t!==e.value}getMaskOpts(e){const{onMaska:t,preProcess:i,postProcess:s,...a}=e;return a}init(e,t){for(const s of e){var i=new n(o(s,t));this.items.set(s,i),""!==s.value&&this.setMaskedValue(s,s.value),s.addEventListener("input",this.inputEvent),s.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(e,t){var i=this.items.get(e);null!=this.options.preProcess&&(t=this.options.preProcess(t));const s=i.masked(t),a=i.unmasked(i.isEager()?s:t),n=i.completed(t),r={masked:s,unmasked:a,completed:n};t=s,null!=this.options.postProcess&&(t=this.options.postProcess(t)),e.value=t,e.dataset.maskaValue=t,null!=this.options.onMaska&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(e=>e(r)):this.options.onMaska(r)),e.dispatchEvent(new CustomEvent("maska",{detail:r})),e.dispatchEvent(new CustomEvent("input",{detail:r}))}}const c=new WeakMap;e.Mask=n,e.MaskInput=d,e.tokens=s,e.vMaska=(e,t)=>{var e=e instanceof HTMLInputElement?e:e.querySelector("input"),i={...t.arg};if(null!=e){s=e,setTimeout(()=>{var e;!0===(null==(e=c.get(s))?void 0:e.needUpdateValue(s))&&s.dispatchEvent(new CustomEvent("input"))});var s,a=c.get(e);if(null!=a){if(!a.needUpdateOptions(e,i))return;a.destroy()}if(null!=t.value){const n=t.value,r=e=>{n.masked=e.masked,n.unmasked=e.unmasked,n.completed=e.completed};i.onMaska=null==i.onMaska?r:Array.isArray(i.onMaska)?[...i.onMaska,r]:[i.onMaska,r]}c.set(e,new d(e,i))}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});