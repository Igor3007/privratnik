class afLightbox{constructor(e){this.modal="",e&&(this.mobileBottom=e.mobileInBottom||!1)}init(){}createTemplate(){var e=document.createElement("div");return e.innerHTML=`
                <div class="af-popup">
                    <div class="af-popup__bg"></div>
                    <div class="af-popup__wrp">
                        <div class="af-popup__container">
                            <div class="af-popup__close">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg>
                            </div>
                            <div class="af-popup__content"></div>
                        </div>
                    </div>
                </div>
                `,document.body.append(e),this.instanse=e}open(e,t){let s=this;this.modal=this.createTemplate(),window.innerWidth<=480&&this.mobileBottom&&this.modal.querySelector(".af-popup").classList.add("af-popup--mobile"),document.body.classList.add("page-hidden"),this.modal.querySelector(".af-popup__content").innerHTML=e,this.modal.querySelector(".af-popup__close").addEventListener("click",function(){s.close()}),this.modal.querySelector('[data-af-popup="close"]')&&this.modal.querySelector('[data-af-popup="close"]').addEventListener("click",function(e){s.close()}),t&&t(this.modal),setTimeout(()=>{this.modal.querySelector(".af-popup").classList.add("af-popup--visible")},10),this.createEvent()}changeContent(e){this.modal.querySelector(".af-popup__content").innerHTML=e}createEvent(){let t=this;this.instanse.querySelector(".af-popup").addEventListener("click",function(e){e.target.closest(".af-popup__container")||t.close()})}close(){document.body.classList.contains("page-hidden")&&document.body.classList.remove("page-hidden"),this.instanse.querySelector(".af-popup").classList.remove("af-popup--visible"),setTimeout(()=>{this.instanse.remove()},300)}}class afSelect{constructor(e){this.selector=e.selector,this.selectAll=document.querySelectorAll(this.selector),this.on=e.on||!1}init(){this.renderTemplate(),this.clickEventOut()}reinit(e){e=e.parentNode;e.querySelector(".select-styled")&&(e.querySelector(".select-styled").remove(),e.querySelector(".select-list").remove()),this.renderOption(e),this.clickEventOpenSelect(e)}ajaxOption(e,t){let s=new XMLHttpRequest;return s.open("GET",e.dataset.ajax),s.responseType="json",s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.send(),s.onerror=function(){console.err("Error: afSelect ajax request failed")},s.onreadystatechange=function(){3==s.readyState&&e.closest(".af-select").querySelector(".select-list").classList.add("select-list--load"),4==s.readyState&&e.closest(".af-select").querySelector(".select-list").classList.remove("select-list--load")},s.onload=function(){t(s.response)},null}renderOption(a){var i=this,n=a.querySelector("select"),l=n.getAttribute("placeholder"),o=n.getAttribute("multiple");const r=document.createElement("div"),c=(r.classList.add("select-styled"),r.innerHTML="<span>"+l+"</span>",document.createElement("ul"));c.classList.add("select-options");var e,t=document.createElement("div");function d(e){e.querySelectorAll("select > option").forEach(function(e,t){var s,a=document.createElement("li");function n(e){if(o){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(", "):l}return e.innerText}a.innerHTML=e.innerText,a.setAttribute("rel",e.value),o&&((s=document.createElement("span")).classList.add("af-check-multiple"),a.append(s)),0!=t||l||(r.innerHTML="<span>"+e.innerText+"</span>"),e.getAttribute("selected")&&(r.innerHTML=l?'<span class="af-selected-placeholder" data-af-placeholder="'+l+'">'+n(e)+"</span>":"<span>"+n(e)+"</span>",a.classList.add("active")),e.getAttribute("disabled")||(c.appendChild(a),i.clickEventListItem(a,e,t))})}t.classList.add("select-list"),(n.getAttribute("data-find")||5<n.querySelectorAll("option").length)&&((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("placeholder","Найти"),t.appendChild(e),e.addEventListener("keyup",e=>{this.findOption(e)})),t.appendChild(c),a.querySelector(".select-styled")||a.appendChild(r),a.querySelector(".select-options")||a.appendChild(t),n.dataset.ajax&&this.ajaxOption(n,function(e){n.innerHTML="";let s=n.dataset.selected;var t=n.getAttribute("placeholder");e.unshift({text:t||"-Выберите-",value:""}),e.forEach(function(e){var t=document.createElement("option");t.value=e.value,t.innerText=e.text,s==e.value&&(t.setAttribute("selected",!0),n.removeAttribute("data-selected")),n.append(t)}),d(a)}),n.dataset.ajax||d(a),n.afSelect=new Object,n.afSelect.open=function(){i.openSelect(a)},n.afSelect.close=function(){i.closeSelect()},n.afSelect.update=function(){i.reinit(n)}}findOption(e){var t=e.target.closest(".select-list").querySelectorAll("li");const s=e.target.value;t.forEach(e=>{-1!==e.innerText.toLowerCase().indexOf(s.toLowerCase())?e.style.display="block":e.style.display="none"})}renderTemplate(){const s=this,a=[];this.selectAll.forEach(function(e,t){var s;e.classList.contains("select-hidden")||(e.classList.add("select-hidden"),(s=document.createElement("div")).classList.add("af-select"),e.getAttribute("multiple")&&s.classList.add("af-select--multiple"),s.innerHTML=e.outerHTML,e.parentNode.replaceChild(s,e),a.push(s))}),a.forEach(function(e,t){s.renderOption(e),s.clickEventOpenSelect(e)})}openSelect(e){if(e.querySelector(".select-styled.active"))return this.closeSelect(),!1;e.querySelector("select").dataset.ajax&&!e.querySelector(".select-styled").classList.contains("active")&&(e.querySelector(".select-list").remove(),this.renderOption(e)),window.innerHeight-e.getBoundingClientRect().bottom<250?e.classList.add("af-select--top"):e.classList.contains("af-select--top")&&e.classList.remove("af-select--top"),e.style.maxWidth=e.offsetWidth+"px",e.querySelector(".select-styled").classList.add("active"),e.querySelector(".select-options").classList.add("active"),e.querySelector(".select-list").classList.add("active"),document.querySelector("body").classList.add("af-select-open")}closeSelect(){if(!document.querySelector(".select-styled.active"))return!1;document.querySelector(".select-styled.active").classList.remove("active"),document.querySelector(".select-options.active").classList.remove("active"),document.querySelector(".select-list.active").classList.remove("active"),document.querySelector("body").classList.remove("af-select-open")}clickEventOut(){const t=this;document.addEventListener("click",function(e){t.closeSelect()})}clickEventListItem(e,a,t){const n=a.parentNode.parentNode,i=this,l=n.querySelector("select").getAttribute("placeholder"),o=n.querySelector("select").getAttribute("multiple"),r=n.querySelector(".select-styled");e.addEventListener("click",function(e){function t(e){if(o){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(", "):l}return e.innerText}e.stopPropagation(),e.preventDefault(),a.closest(".af-select").classList.add("af-select--selected"),n.querySelector(".select-options li.active")&&!o&&n.querySelector(".select-options li.active").classList.remove("active"),this.classList.contains("active")?(this.classList.remove("active"),a.removeAttribute("selected")):(this.classList.add("active"),a.setAttribute("selected","selected")),l?r.innerHTML='<span class="af-selected-placeholder" data-af-placeholder="'+l+'">'+t(a)+"</span>":n.querySelector(".select-styled span").innerHTML=t(a),o||(n.querySelector("select").value=this.getAttribute("rel"));var s=new Event("change");n.querySelector("select").dispatchEvent(s),e.target.classList.contains("af-check-multiple")||i.closeSelect(),i.on.change&&i.on.change(a)})}clickEventOpenSelect(e){const t=this;function s(e){e.stopPropagation(),e.preventDefault(),e.target.closest(".select-styled")&&t.openSelect(this)}e.removeEventListener("click",s),e.addEventListener("click",s)}}!function(e){var t=function(a,p,i){"use strict";var h,f,m,H,n,v,e,d,W,l,j,P,s,B,o,u,y,g,k,E,b,I,S,t,D,F,r,c,V,$,U,L,A,J,M,Z,G,X,z,C,q,T,K,Q,Y,ee,te,w,se,ae,ne,ie,x,_,O,le,R,oe,re,ce,N,de,ue,pe,he,fe,me,ve,ye={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(ve in f=a.lazySizesConfig||a.lazysizesConfig||{},ye)ve in f||(f[ve]=ye[ve]);return p&&p.getElementsByClassName?(m=p.documentElement,H=a.HTMLPictureElement,v="getAttribute",e=a[n="addEventListener"].bind(a),d=a.setTimeout,W=a.requestAnimationFrame||d,l=a.requestIdleCallback,j=/^picture$/i,P=["load","error","lazyincluded","_lazyloaded"],s={},B=Array.prototype.forEach,o=function(e,t){return s[t]||(s[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),s[t].test(e[v]("class")||"")&&s[t]},u=function(e,t){o(e,t)||e.setAttribute("class",(e[v]("class")||"").trim()+" "+t)},y=function(e,t){(t=o(e,t))&&e.setAttribute("class",(e[v]("class")||"").replace(t," "))},g=function(t,s,e){var a=e?n:"removeEventListener";e&&g(t,s),P.forEach(function(e){t[a](e,s)})},k=function(e,t,s,a,n){var i=p.createEvent("Event");return(s=s||{}).instance=h,i.initEvent(t,!a,!n),i.detail=s,e.dispatchEvent(i),i},E=function(e,t){var s;!H&&(s=a.picturefill||f.pf)?(t&&t.src&&!e[v]("srcset")&&e.setAttribute("srcset",t.src),s({reevaluate:!0,elements:[e]})):t&&t.src&&(e.src=t.src)},b=function(e,t){return(getComputedStyle(e,null)||{})[t]},I=function(e,t,s){for(s=s||e.offsetWidth;s<f.minSize&&t&&!e._lazysizesWidth;)s=t.offsetWidth,t=t.parentNode;return s},fe=[],me=he=[],Ce._lsFlush=ze,S=Ce,t=function(s,e){return e?function(){S(s)}:function(){var e=this,t=arguments;S(function(){s.apply(e,t)})}},D=function(e){function t(){var e=i.now()-a;e<99?d(t,99-e):(l||n)(n)}var s,a,n=function(){s=null,e()};return function(){a=i.now(),s=s||d(t,99)}},ae=/^img$/i,ne=/^iframe$/i,ie="onscroll"in a&&!/(gle|ing)bot/.test(navigator.userAgent),O=-1,le=function(e){return(K=null==K?"hidden"==b(p.body,"visibility"):K)||!("hidden"==b(e.parentNode,"visibility")&&"hidden"==b(e,"visibility"))},Q=Ee,ee=_=x=0,te=f.throttleDelay,w=f.ricTimeout,se=l&&49<w?function(){l(be,{timeout:w}),w!==f.ricTimeout&&(w=f.ricTimeout)}:t(function(){d(be)},!0),oe=t(Se),re=function(e){oe({target:e.target})},ce=t(function(t,e,s,a,n){var i,l,o,r,c;(l=k(t,"lazybeforeunveil",e)).defaultPrevented||(a&&(s?u(t,f.autosizesClass):t.setAttribute("sizes",a)),s=t[v](f.srcsetAttr),a=t[v](f.srcAttr),n&&(i=(r=t.parentNode)&&j.test(r.nodeName||"")),o=e.firesLoad||"src"in t&&(s||a||i),l={target:t},u(t,f.loadingClass),o&&(clearTimeout(J),J=d(ke,2500),g(t,re,!0)),i&&B.call(r.getElementsByTagName("source"),Le),s?t.setAttribute("srcset",s):a&&!i&&(ne.test(t.nodeName)?(e=a,0==(c=(r=t).getAttribute("data-load-mode")||f.iframeLoadMode)?r.contentWindow.location.replace(e):1==c&&(r.src=e)):t.src=a),n&&(s||i)&&E(t,{src:a})),t._lazyRace&&delete t._lazyRace,y(t,f.lazyClass),S(function(){var e=t.complete&&1<t.naturalWidth;o&&!e||(e&&u(t,f.fastLoadedClass),Se(l),t._lazyCache=!0,d(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&_--},!0)}),de=D(function(){f.loadMode=3,R()}),F={_:function(){Z=i.now(),h.elements=p.getElementsByClassName(f.lazyClass),L=p.getElementsByClassName(f.lazyClass+" "+f.preloadClass),e("scroll",R,!0),e("resize",R,!0),e("pageshow",function(e){var t;e.persisted&&(t=p.querySelectorAll("."+f.loadingClass)).length&&t.forEach&&W(function(){t.forEach(function(e){e.complete&&N(e)})})}),a.MutationObserver?new MutationObserver(R).observe(m,{childList:!0,subtree:!0,attributes:!0}):(m[n]("DOMNodeInserted",R,!0),m[n]("DOMAttrModified",R,!0),setInterval(R,999)),e("hashchange",R,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){p[n](e,R,!0)}),/d$|^c/.test(p.readyState)?Me():(e("load",Me),p[n]("DOMContentLoaded",R),d(Me,2e4)),h.elements.length?(Ee(),S._lsFlush()):R()},checkElems:R=function(e){var t;(e=!0===e)&&(w=33),Y||(Y=!0,(t=te-(i.now()-ee))<0&&(t=0),e||t<9?se():d(se,t))},unveil:N=function(e){var t,s,a,n;e._lazyRace||!(!(n="auto"==(a=(s=ae.test(e.nodeName))&&(e[v](f.sizesAttr)||e[v]("sizes"))))&&A||!s||!e[v]("src")&&!e.srcset||e.complete||o(e,f.errorClass))&&o(e,f.lazyClass)||(t=k(e,"lazyunveilread").detail,n&&r.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,_++,ce(e,t,n,a,s))},_aLSL:Ae},$=t(function(e,t,s,a){var n,i,l;if(e._lazysizesWidth=a,e.setAttribute("sizes",a+="px"),j.test(t.nodeName||""))for(i=0,l=(n=t.getElementsByTagName("source")).length;i<l;i++)n[i].setAttribute("sizes",a);s.detail.dataAttr||E(e,s.detail)}),r={_:function(){V=p.getElementsByClassName(f.autosizesClass),e("resize",U)},checkElems:U=D(function(){var e,t=V.length;if(t)for(e=0;e<t;e++)ge(V[e])}),updateElem:ge},c=function(){!c.i&&p.getElementsByClassName&&(c.i=!0,r._(),F._())},d(function(){f.init&&c()}),h={cfg:f,autoSizer:r,loader:F,init:c,uP:E,aC:u,rC:y,hC:o,fire:k,gW:I,rAF:S}):{init:function(){},cfg:f,noSupport:!0};function ge(e,t,s){var a=e.parentNode;a&&(s=I(e,a,s),(t=k(e,"lazybeforesizes",{width:s,dataAttr:!!t})).defaultPrevented||(s=t.detail.width)&&s!==e._lazysizesWidth&&$(e,a,t,s))}function ke(e){_--,e&&!(_<0)&&e.target||(_=0)}function Ee(){var e,t,s,a,n,i,l,o,r,c,d,u=h.elements;if((M=f.loadMode)&&_<8&&(e=u.length)){for(t=0,O++;t<e;t++)if(u[t]&&!u[t]._lazyRace)if(!ie||h.prematureUnveil&&h.prematureUnveil(u[t]))N(u[t]);else if((l=u[t][v]("data-expand"))&&(n=+l)||(n=x),r||(r=!f.expand||f.expand<1?500<m.clientHeight&&500<m.clientWidth?500:370:f.expand,c=(h._defEx=r)*f.expFactor,d=f.hFac,K=null,x<c&&_<1&&2<O&&2<M&&!p.hidden?(x=c,O=0):x=1<M&&1<O&&_<6?r:0),o!==n&&(G=innerWidth+n*d,X=innerHeight+n,i=-1*n,o=n),c=u[t].getBoundingClientRect(),(T=c.bottom)>=i&&(z=c.top)<=X&&(q=c.right)>=i*d&&(C=c.left)<=G&&(T||q||C||z)&&(f.loadHidden||le(u[t]))&&(A&&_<3&&!l&&(M<3||O<4)||function(e,t){var s,a=e,n=le(e);for(z-=t,T+=t,C-=t,q+=t;n&&(a=a.offsetParent)&&a!=p.body&&a!=m;)(n=0<(b(a,"opacity")||1))&&"visible"!=b(a,"overflow")&&(s=a.getBoundingClientRect(),n=q>s.left&&C<s.right&&T>s.top-1&&z<s.bottom+1);return n}(u[t],n))){if(N(u[t]),a=!0,9<_)break}else!a&&A&&!s&&_<4&&O<4&&2<M&&(L[0]||f.preloadAfterLoad)&&(L[0]||!l&&(T||q||C||z||"auto"!=u[t][v](f.sizesAttr)))&&(s=L[0]||u[t]);s&&!a&&N(s)}}function be(){Y=!1,ee=i.now(),Q()}function Se(e){var t=e.target;t._lazyCache?delete t._lazyCache:(ke(e),u(t,f.loadedClass),y(t,f.loadingClass),g(t,re),k(t,"lazyloaded"))}function Le(e){var t,s=e[v](f.srcsetAttr);(t=f.customMedia[e[v]("data-media")||e[v]("media")])&&e.setAttribute("media",t),s&&e.setAttribute("srcset",s)}function Ae(){3==f.loadMode&&(f.loadMode=2),de()}function Me(){A||(i.now()-Z<999?d(Me,999):(A=!0,f.loadMode=3,R(),e("scroll",Ae,!0)))}function ze(){var e=me;for(me=he.length?fe:he,pe=!(ue=!0);e.length;)e.shift()();ue=!1}function Ce(e,t){ue&&!t?e.apply(this,arguments):(me.push(e),pe||(pe=!0,(p.hidden?d:W)(ze)))}}(e,e.document,Date);e.lazySizes=t,"object"==typeof module&&module.exports&&(module.exports=t)}("undefined"!=typeof window?window:{}),document.addEventListener("lazybeforeunveil",function(e){var t=e.target.getAttribute("data-bg");t&&(e.target.style.backgroundImage="url("+t+")")}),function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).Maska={})}(this,function(e){"use strict";var n=Object.defineProperty,s=(e,t,s)=>{return a=s,(t="symbol"!=typeof t?t+"":t)in(e=e)?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,s;var a};const a={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class i{constructor(e={}){s(this,"opts",{}),s(this,"memo",new Map);e={...e};if(null!=e.tokens){e.tokens=e.tokensReplace?{...e.tokens}:{...a,...e.tokens};for(const t of Object.values(e.tokens))"string"==typeof t.pattern&&(t.pattern=new RegExp(t.pattern))}else e.tokens=a;Array.isArray(e.mask)&&(1<e.mask.length?e.mask=[...e.mask].sort((e,t)=>e.length-t.length):e.mask=e.mask[0]??""),""===e.mask&&(e.mask=null),this.opts=e}masked(e){return this.process(e,this.findMask(e))}unmasked(e){return this.process(e,this.findMask(e),!1)}isEager(){return!0===this.opts.eager}isReversed(){return!0===this.opts.reversed}completed(e){var t=this.findMask(e);if(null==this.opts.mask||null==t)return!1;const s=this.process(e,t).length;return"string"==typeof this.opts.mask?s>=this.opts.mask.length:"function"==typeof this.opts.mask?s>=t.length:this.opts.mask.filter(e=>s>=e.length).length===this.opts.mask.length}findMask(t){var e=this.opts.mask;if(null==e)return null;if("string"==typeof e)return e;if("function"==typeof e)return e(t);const s=this.process(t,e.slice(-1).pop()??"",!1);return e.find(e=>this.process(t,e,!1).length>=s.length)??""}escapeMask(s){const a=[],n=[];return s.split("").forEach((e,t)=>{"!"===e&&"!"!==s[t-1]?n.push(t-n.length):a.push(e)}),{mask:a.join(""),escaped:n}}process(e,t,s=!0){if(null==t)return e;var a=`value=${e},mask=${t},masked=`+(s?1:0);if(this.memo.has(a))return this.memo.get(a);const{mask:n,escaped:i}=this.escapeMask(t),l=[],o=null!=this.opts.tokens?this.opts.tokens:{},r=this.isReversed()?-1:1,c=this.isReversed()?"unshift":"push",d=this.isReversed()?0:n.length-1,u=this.isReversed()?()=>-1<m&&-1<v:()=>m<n.length&&v<e.length,p=e=>!this.isReversed()&&e<=d||this.isReversed()&&e>=d;let h,f=-1,m=this.isReversed()?n.length-1:0,v=this.isReversed()?e.length-1:0;for(;u();){var y,g=n.charAt(m),k=o[g],E=null!=(null==k?void 0:k.transform)?k.transform(e.charAt(v)):e.charAt(v);if(i.includes(m)||null==k?(s&&!this.isEager()&&l[c](g),E!==g||this.isEager()?h=g:v+=r,this.isEager()||(m+=r)):(null!=E.match(k.pattern)?(l[c](E),k.repeated?(-1===f?f=m:m===d&&m!==f&&(m=f-r),d===f&&(m-=r)):k.multiple&&(m-=r),m+=r):k.multiple?(g=null!=(null==(g=l[v-r])?void 0:g.match(k.pattern)),y=n.charAt(m+r),g&&""!==y&&null==o[y]?(m+=r,v-=r):l[c]("")):E===h?h=void 0:k.optional&&(m+=r,v-=r),v+=r),this.isEager())for(;p(m)&&(null==o[n.charAt(m)]||i.includes(m));)s?l[c](n.charAt(m)):n.charAt(m)===e.charAt(v)&&(v+=r),m+=r}return this.memo.set(a,l.join("")),this.memo.get(a)}}const l=e=>JSON.parse(e.replaceAll("'",'"')),o=(e,t={})=>{var s,t={...t};return null!=e.dataset.maska&&""!==e.dataset.maska&&(t.mask=(s=e.dataset.maska).startsWith("[")&&s.endsWith("]")?l(s):s),null!=e.dataset.maskaEager&&(t.eager=r(e.dataset.maskaEager)),null!=e.dataset.maskaReversed&&(t.reversed=r(e.dataset.maskaReversed)),null!=e.dataset.maskaTokensReplace&&(t.tokensReplace=r(e.dataset.maskaTokensReplace)),null!=e.dataset.maskaTokens&&(t.tokens=(e=>{if(e.startsWith("{")&&e.endsWith("}"))return l(e);const s={};return e.split("|").forEach(e=>{const t=e.split(":");s[t[0]]={pattern:new RegExp(t[1]),optional:t[2]==="optional",multiple:t[2]==="multiple",repeated:t[2]==="repeated"}}),s})(e.dataset.maskaTokens)),t},r=e=>""===e||!!JSON.parse(e);class c{constructor(e,t={}){s(this,"items",new Map),s(this,"beforeinputEvent",e=>{var t=e.target,s=this.items.get(t);s.isEager()&&"inputType"in e&&e.inputType.startsWith("delete")&&s.unmasked(t.value).length<=1&&this.setMaskedValue(t,"")}),s(this,"inputEvent",t=>{if(!(t instanceof CustomEvent&&"input"===t.type&&null!=t.detail&&"object"==typeof t.detail&&"masked"in t.detail)){var s,a,n=t.target,i=this.items.get(n),l=n.value,o=n.selectionStart,r=n.selectionEnd;let e=l;if(i.isEager()&&(s=i.masked(l),""===(a=i.unmasked(l))&&"data"in t&&null!=t.data?e=t.data:a!==i.unmasked(s)&&(e=a)),this.setMaskedValue(n,e),"inputType"in t&&(t.inputType.startsWith("delete")||null!=o&&o<l.length))try{n.setSelectionRange(o,r)}catch{}}}),this.options=t,"string"==typeof e?this.init(Array.from(document.querySelectorAll(e)),this.getMaskOpts(t)):this.init("length"in e?Array.from(e):[e],this.getMaskOpts(t))}destroy(){for(const e of this.items.keys())e.removeEventListener("input",this.inputEvent),e.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(e,t){var s=this.items.get(e),e=new i(o(e,this.getMaskOpts(t)));return JSON.stringify(s.opts)!==JSON.stringify(e.opts)}needUpdateValue(e){var t=e.dataset.maskaValue;return null==t&&""!==e.value||null!=t&&t!==e.value}getMaskOpts(e){const{onMaska:t,preProcess:s,postProcess:a,...n}=e;return n}init(e,t){for(const a of e){var s=new i(o(a,t));this.items.set(a,s),""!==a.value&&this.setMaskedValue(a,a.value),a.addEventListener("input",this.inputEvent),a.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(e,t){var s=this.items.get(e);null!=this.options.preProcess&&(t=this.options.preProcess(t));const a=s.masked(t),n=s.unmasked(s.isEager()?a:t),i=s.completed(t),l={masked:a,unmasked:n,completed:i};t=a,null!=this.options.postProcess&&(t=this.options.postProcess(t)),e.value=t,e.dataset.maskaValue=t,null!=this.options.onMaska&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(e=>e(l)):this.options.onMaska(l)),e.dispatchEvent(new CustomEvent("maska",{detail:l})),e.dispatchEvent(new CustomEvent("input",{detail:l}))}}const d=new WeakMap;e.Mask=i,e.MaskInput=c,e.tokens=a,e.vMaska=(e,t)=>{var e=e instanceof HTMLInputElement?e:e.querySelector("input"),s={...t.arg};if(null!=e){a=e,setTimeout(()=>{var e;!0===(null==(e=d.get(a))?void 0:e.needUpdateValue(a))&&a.dispatchEvent(new CustomEvent("input"))});var a,n=d.get(e);if(null!=n){if(!n.needUpdateOptions(e,s))return;n.destroy()}if(null!=t.value){const i=t.value,l=e=>{i.masked=e.masked,i.unmasked=e.unmasked,i.completed=e.completed};s.onMaska=null==s.onMaska?l:Array.isArray(s.onMaska)?[...s.onMaska,l]:[s.onMaska,l]}d.set(e,new c(e,s))}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});